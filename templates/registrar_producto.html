{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/registrar.css') }}">
{% endblock %}

{% block content %}
<div class="form-container">
  <h2>🛍️ Registrar Producto</h2>
  <form method="post" enctype="multipart/form-data">

    <!-- Nombre -->
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <!-- Descripción -->
    <label for="descripcion">Descripción:</label>
    <textarea id="descripcion" name="descripcion"></textarea>

    <!-- Precio -->
    <label for="precio">Precio:</label>
    <input type="number" id="precio" step="0.01" name="precio">

    <!-- Stock -->
    <label for="stock">Stock:</label>
    <input type="number" id="stock" name="stock">

    <!-- Umbral de alerta -->
    <label for="umbral_alerta">Umbral de alerta:</label>
    <input type="number" id="umbral_alerta" name="umbral_alerta" value="5">

    <!-- Peso -->
    <label for="peso">Peso (g):</label>
    <input type="number" id="peso" step="0.01" name="peso">

    <!-- Alto -->
    <label for="alto">Alto (cm):</label>
    <input type="number" id="alto" step="0.01" name="alto">

    <!-- Ancho -->
    <label for="ancho">Ancho (cm):</label>
    <input type="number" id="ancho" step="0.01" name="ancho">

    <!-- Largo -->
    <label for="largo">Largo (cm):</label>
    <input type="number" id="largo" step="0.01" name="largo">

    <!-- Colores -->
    <label>Colores:</label>
    <div class="checkbox-group">
      {% for color in colores %}
        <label>
          <input type="checkbox" name="colores" value="{{ color.id_color }}">
          {{ color.nombre }}
        </label>
      {% endfor %}
    </div>

    <!-- Piedras -->
    <label>Piedras:</label>
    <div class="checkbox-group">
      {% for piedra in piedras %}
        <label>
          <input type="checkbox" name="piedras" value="{{ piedra.id_piedra }}">
          {{ piedra.nombre }}
        </label>
      {% endfor %}
    </div>

    <!-- Imágenes -->
    <label for="imagenes">Imágenes:</label>
    <input type="file" id="imagenes" name="imagenes" multiple onchange="previewImages()">

    <!-- Preview de imágenes -->
    <div id="preview" class="image-preview"></div>

    <!-- Botón -->
    <button type="submit" class="btn-submit">💾 Guardar</button>
  </form>
</div>

<!-- JS para preview -->
<script>
  function previewImages() {
    const preview = document.getElementById("preview");
    preview.innerHTML = "";
    const files = document.getElementById("imagenes").files;

    if (files) {
      Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const img = document.createElement("img");
          img.src = e.target.result;
          img.classList.add("preview-img");
          preview.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    }
  }
</script>
{% endblock %}
