{% extends "base.html" %}
{% block content %}
<main>
    <h2>Cat√°logo de productos</h2>
    <div class="catalogo-grid">
        {% for producto in productos %}
        <div class="producto-card">
            <a href="{{ url_for('producto_detalle', id_producto=producto.id_producto) }}">

                {% if producto.imagen_local %}
                <!-- Imagen subida por vendedor -->
                <img src="{{ url_for('static', filename='uploads/' ~ producto.imagen_local) }}"
                    alt="{{ producto.nombre }}">
                {% elif producto.imagen_url %}
                <!-- Imagen de la tabla imagenes (link) -->
                <img src="{{ producto.imagen_url }}" alt="{{ producto.nombre }}">
                {% else %}
                <!-- Imagen por defecto -->
                <img src="{{ url_for('static', filename='img/no-image.png') }}" alt="sin imagen">
                {% endif %}


                <h3>{{ producto.nombre }}</h3>
                <p class="descripcion">{{ producto.descripcion[:80] }}...</p>
                <p class="precio">${{ producto.precio }}</p>
                <p class="stock">Stock: {{ producto.stock }}</p>
            </a>
            <form action="{{ url_for('agregar_carrito', id_producto=producto.id_producto) }}" method="POST">
                <input type="hidden" name="cantidad" value="1">
                <button type="submit">Agregar al carrito</button>
            </form>
        </div>
        {% endfor %}
    </div>
</main>
{% endblock %}